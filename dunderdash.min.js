!function(a,b){"function"==typeof define&&define.amd?define(["bucketsjs","require"],b):"object"==typeof exports?module.exports=b(require("bucketsjs"),require):a.dunderdash=b(a.buckets,function(b){return a[b]})}(this,function(a,b){function c(a,b,c){return"function"==typeof b?{v:b.apply(a,c)}:{v:b}}function d(){function b(a,b){Object.defineProperty&&Object.defineProperty(a,b,{enumerable:!1})}this.type=function(a){var b=Object.prototype.toString.call(a),c=b.slice(8,-1).toLowerCase();return"domwindow"!==c||a?("object"===c&&a.constructor&&(c=a.constructor.name),c):a+""};var c=0;this.hash=function(a){switch(this.type(a)){case"undefined":case"null":case"boolean":case"number":case"regexp":return a+"";case"date":return":"+a.getTime();case"string":return'"'+a;case"array":for(var d=[],e=0;e<a.length;e++)d[e]=this.hash(a[e]);return"["+d.join("|");case"object":default:return a._hmuid_||(a._hmuid_=++c,b(a,"_hmuid_")),"{"+a._hmuid_}};var d=this.hash.bind(this),e=new a.Dictionary(d),f=new a.BSTree(function(a,b){return a.priority<b.priority?-1:a.priority>b.priority?1:0}),g={};this.method=function(b,c){if(!e.containsKey(b)){if(this[b])throw new Error("Name already reserved: "+b);e.set(b,new a.Dictionary(d)),this[b]=this.dispatch.bind(this,b)}var f=e.get(b);f.containsKey(c)||f.set(c,new c(this));var g=Array.prototype.slice.call(arguments,2);return f.get(c).push(g),!0},this.dispatch=function(b){if(!e.containsKey(b))throw new Error("Unknown method: "+b);var c,g,h=e.get(b),i=h.keys(),j=Array.prototype.slice.call(arguments,1),k=new a.Set(d),l=function(a){var b=h.get(a);if(void 0!==b)return b.dispatch(j)};if(f.forEach(function(a){var b=a.dispatcher;k.add(b);var d=l(b);return d?(c=d.v,g=!0,!1):void 0}),g)return c;for(var m=0;m<i.length;m++){var n=i[m];if(!k.contains(n)){var o=l(n);if(o)return o.v}}throw new Error("Could not resolve method signature: "+b+"("+j+") ; types: ("+this.map(j,this.type).join(",")+")")},this.prioritizeDispatcher=function(a,b){f.add({dispatcher:a,priority:b})},this.ifaceCheck=function(a,b){if(!g[b])return!1;if(g[b].types[a])return!0;var c=!1;return g[b].checkers.forEach(function(b){return b(a)?(c=!0,!1):void 0}),c},this.ifaceRegister=function(a,b){g[b]||(g[b]={types:{},checkers:[]});var c=this.type(a);if("string"===c)g[b].types[a]=!0;else if("function"===c)g[b].checkers.push(a);else{if("array"!==c)throw new Error("Unrecognized iface checker:",a);g[b].checkers.push(function(b){var c=!0;return a.forEach(function(a){return this.ifaceCheck(b,a)?void 0:(c=!1,!1)}.bind(this)),c}.bind(this))}},j(this)}function e(a){this.push=function(a){if(1!==a.length)throw new Error("Default dispatcher takes only one value argument");this.val=a[0]},this.dispatch=function(b){return c(a,this.val,b)}}function f(b){this.entries=[],this.push=function(a){var b=a.slice(0,-1),c=a[a.length-1];this.entries.push({a:b,f:c})},this.dispatch=function(d){var e;return this.entries.forEach(function(f){return a.arrays.equals(f.a,d)?(e=c(b,f.f,d),!1):void 0}),e}}function g(a,b){var c=b.map(function(b){var c=a.type(b);return"string"===c?function(a){return b===a}:"function"===c?b:"array"===c?function(c){var d=!0;return b.forEach(function(b){return a.ifaceCheck(c,b)?void 0:(d=!1,!1)}),d}:function(){return b}});return function(b,d){if(d&&(b=b.slice(0,c.length)),b.length!==c.length)return!1;var e=b.map(a.type),f=!0;return e.forEach(function(a,b){return c[b](a)?void 0:(f=!1,!1)}),f}}function h(a){this.entries=[],this.push=function(b){var c=b.slice(0,-1),d=b[b.length-1];this.entries.push({s:g(a,c),f:d})},this.dispatch=function(b){var d;return this.entries.forEach(function(e){return e.s(b)?(d=c(a,e.f,b),!1):void 0}),d}}function i(a){this.entries=[],this.push=function(b){var c=b.slice(0,-1),d=b[b.length-1];this.entries.push({s:g(a,c),f:d})},this.dispatch=function(b){var d;return this.entries.forEach(function(e){return e.s(b,!0)?(d=c(a,e.f,b),!1):void 0}),d}}function j(a){function b(){return!0}function c(b){a.ifaceRegister(b[2],b[0])}function d(c){a.ifaceRegister(b,c[0])}function g(a,b){return function(){var c=[arguments[0],a];if(c.push.apply(c,Array.prototype.slice.call(arguments,1)),c.length!==arguments.length+1)throw new Error("Could not properly construct helper arguments!");return b&&b(c),this.method.apply(this,c)}}a.prioritizeDispatcher(e,1e3),a.prioritizeDispatcher(f,10),a.prioritizeDispatcher(h,50),a.prioritizeDispatcher(i,60),a.method("methodDefault",e,g(e,d)),a.method("methodWithArgs",e,g(f)),a.method("methodWithSignature",e,g(h,c)),a.method("methodStartsWithSignature",e,g(i,c))}function k(a){function b(b){var c=Array.prototype.slice.call(arguments,1);return c.splice(0,0,0,0),function(){var d=Array.prototype.slice.call(arguments,1);d.splice.apply(d,c);var e=arguments[0][b];return"function"===a.type(e)?e.apply(arguments[0],d):e}}function c(b){var c=Array.prototype.slice.call(arguments,1);return c.splice(0,0,0,0),function(){var d=Array.prototype.slice.call(arguments,1);d.splice.apply(d,c);var e=arguments[0][b];return"function"===a.type(e)?(e.apply(arguments[0],d),arguments[0]):e}}var d=a.type([]),e=a.type({}),f=a.type(""),g=(a.type(0),a.type(null)),h=a.type(void 0),i="function",j=["rest","first","size"],k=function(a,b){return a[b]};a.methodWithSignature("get",d,!0,k),a.methodWithSignature("get",e,!0,k),a.methodWithSignature("get",f,!0,k),a.methodWithSignature("get",g,!0,null),a.methodWithSignature("get",h,!0,void 0),a.methodDefault("get",k);var l=function(a,b,c){return a[b]=c,a};a.methodWithSignature("set",d,!0,!0,l),a.methodWithSignature("set",e,!0,!0,l),a.methodWithSignature("set",f,!0,!0,l),a.methodWithSignature("set",g,!0,!0,null),a.methodWithSignature("set",h,!0,!0,void 0),a.methodDefault("set",l);var m=function(a,b){return delete a[b],a};a.methodWithSignature("dissoc",d,!0,m),a.methodWithSignature("dissoc",e,!0,m),a.methodWithSignature("dissoc",f,!0,m),a.methodWithSignature("dissoc",g,!0,null),a.methodWithSignature("dissoc",h,!0,void 0),a.methodDefault("dissoc",m);var n=function(a,b){if(0===this.size(b))return a;var c=this.get(a,this.first(b));return 1===this.size(b)?c:this.getIn(c,this.rest(b))};a.methodWithSignature("getIn",g,j,null),a.methodWithSignature("getIn",h,j,void 0),a.methodWithSignature("getIn",["get"],j,n);var o=function(a,b,c){if(0===this.size(b))return a;var d=this.first(b);if(1===this.size(b))return this.set(a,d,c(this.get(a,d)));var e=this.get(a,d);return this.set(a,d,this.updateIn(e,this.rest(b),c))};a.methodWithSignature("updateIn",g,j,i,null),a.methodWithSignature("updateIn",h,j,i,void 0),a.methodWithSignature("updateIn",["get","set"],j,i,o);var p=function(a,b,c){if(0===this.size(b))return a;var d=this.first(b);if(1===this.size(b))return this.set(a,d,c);var e=this.get(a,d);return this.set(a,d,this.assocIn(e,this.rest(b),c))};a.methodWithSignature("assocIn",g,j,!0,null),a.methodWithSignature("assocIn",h,j,!0,void 0),a.methodWithSignature("assocIn",["get","set"],j,!0,p);var q=function(a,b){if(0===this.size(b))return a;var c=this.first(b);if(1===this.size(b))return this.dissoc(a,c);var d=this.get(a,c);return this.set(a,c,this.dissocIn(d,this.rest(b)))};a.methodWithSignature("dissocIn",g,j,null),a.methodWithSignature("dissocIn",h,j,void 0),a.methodWithSignature("dissocIn",["get","set","dissoc"],j,q),a.methodStartsWithSignature("slice",d,b("slice")),a.methodStartsWithSignature("concat",d,b("concat")),a.methodStartsWithSignature("splice",d,c("splice")),a.methodStartsWithSignature("slice",f,b("slice")),a.methodStartsWithSignature("concat",f,b("concat")),a.methodStartsWithSignature("splice",f,function(a,b,c,d){return a.slice(0,b)+(d||"")+a.slice(b+c)})}function l(a){var c=b("lodash"),d=a.type([]),e=a.type({}),f=a.type(""),g=a.type(null),h=a.type(void 0);c.each(["compact","difference","rest","findIndex","findLastIndex","first","flatten","indexOf","initial","intersection","last","lastIndexOf","pull","remove","rest","sortedIndex","union","uniq","without","xor","zip","zipObject"],function(b){a.methodStartsWithSignature(b,d,c[b]),a.methodStartsWithSignature(b,g,c[b]),a.methodStartsWithSignature(b,h,c[b])}),c.each(["assign","clone","cloneDeep","defaults","findKey","findLastKey","forIn","forInRight","functions","has","invert","keys","mapValues","merge","omit","pairs","pick","transform","values"],function(b){a.methodStartsWithSignature(b,e,c[b]),a.methodStartsWithSignature(b,g,c[b]),a.methodStartsWithSignature(b,h,c[b])}),c.each(["at","contains","countBy","each","every","filter","find","findLast","forEach","forEachRight","groupBy","indexBy","invoke","map","max","min","pluck","reduce","reduceRight","reject","sample","shuffle","size","some","sortBy","toArray","where"],function(b){a.methodStartsWithSignature(b,d,c[b]),a.methodStartsWithSignature(b,f,c[b]),a.methodStartsWithSignature(b,e,c[b]),a.methodStartsWithSignature(b,g,c[b]),a.methodStartsWithSignature(b,h,c[b])}),c.each(c.functions(c),function(b){a.name||a.methodDefault(b,c[b])})}function m(a){function c(b){var c=Array.prototype.slice.call(arguments,1);return c.splice(0,0,0,0),function(){var d=Array.prototype.slice.call(arguments,1);d.splice.apply(d,c);var e=arguments[0][b];return"function"===a.type(e)?e.apply(arguments[0],d):e}}function d(b,c,d){c=parseInt(c),d=parseInt(d);var e=Array.prototype.slice.call(arguments,3),f=a.slice(b,0,c),g=a.slice(b,c+d);return a.concat(f,e,g)}function e(b,c){return a.splice(b,c,1)}function f(b,c){return a.get(b,parseInt(c))}function g(b,c,d){return a.set(b,parseInt(c),d)}var h=b("immutable"),i=a.type(h.Map()),j=function(a){return"Iterable"===a.slice(-8)},k=a.type(h.List()),l=a.type(h.OrderedMap()),m="function",n=a.type(""),o=a.type(0),p=c("delete");a.methodStartsWithSignature("splice",j,d),a.methodStartsWithSignature("splice",k,d),a.methodStartsWithSignature("dissoc",i,p),a.methodStartsWithSignature("dissoc",j,e),a.methodStartsWithSignature("dissoc",k,e),a.methodStartsWithSignature("dissoc",l,p),a.methodWithSignature("get",j,n,f),a.methodWithSignature("get",k,n,f),a.methodWithSignature("set",j,n,!0,g),a.methodWithSignature("set",k,n,!0,g);var q=c("get"),r=c("set");a.methodWithSignature("get",i,!0,q),a.methodWithSignature("get",j,o,q),a.methodWithSignature("get",k,o,q),a.methodWithSignature("get",l,!0,q),a.methodWithSignature("set",i,!0,!0,r),a.methodWithSignature("set",j,o,!0,function(b,c,d){return a.splice(b,c,1,d)}),a.methodWithSignature("set",k,o,!0,r),a.methodWithSignature("set",l,!0,!0,r),a.each(["filter"],function(b){var d=c(b),e=c(b,Boolean);a.methodWithSignature(b,i,m,d),a.methodWithSignature(b,j,m,d),a.methodWithSignature(b,k,m,d),a.methodWithSignature(b,l,m,d),a.methodWithSignature(b,i,e),a.methodWithSignature(b,j,e),a.methodWithSignature(b,k,e),a.methodWithSignature(b,l,e)}),a.each(["map","every","reduce","keys","values","size","toJSON"],function(b){var d=c(b);a.methodStartsWithSignature(b,i,d),a.methodStartsWithSignature(b,j,d),a.methodStartsWithSignature(b,k,d),a.methodStartsWithSignature(b,l,d)}),a.each(["delete","merge","mergeDeep"],function(b){var d=c(b);a.methodStartsWithSignature(b,i,d),a.methodStartsWithSignature(b,k,d),a.methodStartsWithSignature(b,l,d)}),a.each(["push","unshift"],function(b){var d=c(b);a.methodStartsWithSignature(b,k,d),a.methodStartsWithSignature(b,l,d)}),a.each(["concat","join","last","first","rest","toArray","slice","find","forEach","reverse","sort","flatten","groupBy","has","contains"],function(b){var d=c(b);a.methodStartsWithSignature(b,j,d),a.methodStartsWithSignature(b,k,d),a.methodStartsWithSignature(b,l,d)}),a.each([["each","forEach"],["isEqual","equals"]],function(b){var d=b[0],e=b[1],f=c(e);a.methodStartsWithSignature(d,i,f),a.methodStartsWithSignature(d,j,f),a.methodStartsWithSignature(d,k,f),a.methodStartsWithSignature(d,l,f)})}var n={},o=new d;return k(o),l(o),m(o),n.__=o,n.fcall=c,n.namespace=d,n.signatureChecker=g,n.defaultDispatcher=e,n.argDispatcher=f,n.signatureDispatcher=h,n.default=o,n});
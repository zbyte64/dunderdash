function fcall(a,b,c){return"function"==typeof b?{v:b.apply(a,c)}:{v:b}}function namespace(){function a(a,b){Object.defineProperty&&Object.defineProperty(a,b,{enumerable:!1})}this.type=function(a){var b=Object.prototype.toString.call(a),c=b.slice(8,-1).toLowerCase();return"domwindow"!==c||a?("object"===c&&a.constructor&&void 0!==a.constructor.name&&(c=a.constructor.name),c):a+""};var b=0;this.hash=function(c){switch(this.type(c)){case"undefined":case"null":case"boolean":case"number":case"regexp":return c+"";case"date":return":"+c.getTime();case"string":return'"'+c;case"array":for(var d=[],e=0;e<c.length;e++)d[e]=this.hash(c[e]);return"["+d.join("|");case"object":default:return c._hmuid_||(c._hmuid_=++b,a(c,"_hmuid_")),"{"+c._hmuid_}};var c=this.hash.bind(this),d=new buckets.Dictionary(c),e=new buckets.BSTree(function(a,b){return a.priority<b.priority?-1:a.priority>b.priority?1:0}),f={};this.method=function(a,b){if(!d.containsKey(a)){if(this[a])throw new Error("Name already reserved: "+a);d.set(a,new buckets.Dictionary(c)),this[a]=this.dispatch.bind(this,a)}var e=d.get(a);e.containsKey(b)||e.set(b,new b(this));var f=Array.prototype.slice.call(arguments,2);return e.get(b).push(f),!0},this.dispatch=function(a){if(!d.containsKey(a))throw new Error("Unknown method: "+a);var b,f,g=d.get(a),h=g.keys(),i=Array.prototype.slice.call(arguments,1),j=new buckets.Set(c),k=function(a){var b=g.get(a);if(void 0!==b)return b.dispatch(i)};if(e.forEach(function(a){var c=a.dispatcher;j.add(c);var d=k(c);return d?(b=d.v,f=!0,!1):void 0}),f)return b;for(var l=0;l<h.length;l++){var m=h[l];if(!j.contains(m)){var n=k(m);if(n)return n.v}}throw new Error("Could not resolve method signature: "+a+"("+i+") ; types: ("+this.map(i,this.type).join(",")+")")},this.prioritizeDispatcher=function(a,b){e.add({dispatcher:a,priority:b})},this.ifaceCheck=function(a,b){if(!f[b])return!1;if(f[b].types[a])return!0;var c=!1;return f[b].checkers.forEach(function(b){return b(a)?(c=!0,!1):void 0}),c},this.ifaceRegister=function(a,b){f[b]||(f[b]={types:{},checkers:[]});var c=this.type(a);if("string"===c)f[b].types[a]=!0;else if("function"===c)f[b].checkers.push(a);else{if("array"!==c)throw new Error("Unrecognized iface checker:",a);f[b].checkers.push(function(b){var c=!0;return a.forEach(function(a){return this.ifaceCheck(b,a)?void 0:(c=!1,!1)}.bind(this)),c}.bind(this))}},registerMethodHelpers(this)}function defaultDispatcher(a){this.push=function(a){if(1!==a.length)throw new Error("Default dispatcher takes only one value argument");this.val=a[0]},this.dispatch=function(b){return fcall(a,this.val,b)}}function argDispatcher(a){this.entries=[],this.push=function(a){var b=a.slice(0,-1),c=a[a.length-1];this.entries.push({a:b,f:c})},this.dispatch=function(b){var c;return this.entries.forEach(function(d){return buckets.arrays.equals(d.a,b)?(c=fcall(a,d.f,b),!1):void 0}),c}}function signatureChecker(a,b){var c=b.map(function(b){var c=a.type(b);return"string"===c?function(a){return b===a}:"function"===c?b:"array"===c?function(c){var d=!0;return b.forEach(function(b){return a.ifaceCheck(c,b)?void 0:(d=!1,!1)}),d}:function(){return b}});return function(b,d){if(d&&(b=b.slice(0,c.length)),b.length!==c.length)return!1;var e=b.map(a.type),f=!0;return e.forEach(function(a,b){return c[b](a)?void 0:(f=!1,!1)}),f}}function signatureDispatcher(a){this.entries=[],this.push=function(b){var c=b.slice(0,-1),d=b[b.length-1];this.entries.push({s:signatureChecker(a,c),f:d})},this.dispatch=function(b){var c;return this.entries.forEach(function(d){return d.s(b)?(c=fcall(a,d.f,b),!1):void 0}),c}}function startSignatureDispatcher(a){this.entries=[],this.push=function(b){var c=b.slice(0,-1),d=b[b.length-1];this.entries.push({s:signatureChecker(a,c),f:d})},this.dispatch=function(b){var c;return this.entries.forEach(function(d){return d.s(b,!0)?(c=fcall(a,d.f,b),!1):void 0}),c}}function registerMethodHelpers(a){function b(){return!0}function c(b){a.ifaceRegister(b[2],b[0])}function d(c){a.ifaceRegister(b,c[0])}function e(a,b){return function(){var c=[arguments[0],a];if(c.push.apply(c,Array.prototype.slice.call(arguments,1)),c.length!==arguments.length+1)throw new Error("Could not properly construct helper arguments!");return b&&b(c),this.method.apply(this,c)}}a.prioritizeDispatcher(defaultDispatcher,1e3),a.prioritizeDispatcher(argDispatcher,10),a.prioritizeDispatcher(signatureDispatcher,50),a.prioritizeDispatcher(startSignatureDispatcher,60),a.method("methodDefault",defaultDispatcher,e(defaultDispatcher,d)),a.method("methodWithArgs",defaultDispatcher,e(argDispatcher)),a.method("methodWithSignature",defaultDispatcher,e(signatureDispatcher,c)),a.method("methodStartsWithSignature",defaultDispatcher,e(startSignatureDispatcher,c))}function registerSaneStyleBindings(a){function b(b){var c=Array.prototype.slice.call(arguments,1);return c.splice(0,0,0,0),function(){var d=Array.prototype.slice.call(arguments,1);d.splice.apply(d,c);var e=arguments[0][b];return"function"===a.type(e)?e.apply(arguments[0],d):e}}function c(b){var c=Array.prototype.slice.call(arguments,1);return c.splice(0,0,0,0),function(){var d=Array.prototype.slice.call(arguments,1);d.splice.apply(d,c);var e=arguments[0][b];return"function"===a.type(e)?(e.apply(arguments[0],d),arguments[0]):e}}var d=a.type([]),e=a.type({}),f=a.type(""),g=(a.type(0),a.type(null)),h=a.type(void 0),i="function",j=["rest","first","size"],k=function(a,b){return a[b]};a.methodWithSignature("get",d,!0,k),a.methodWithSignature("get",e,!0,k),a.methodWithSignature("get",f,!0,k),a.methodWithSignature("get",g,!0,null),a.methodWithSignature("get",h,!0,void 0),a.methodDefault("get",k);var l=function(a,b,c){return a[b]=c,a};a.methodWithSignature("set",d,!0,!0,l),a.methodWithSignature("set",e,!0,!0,l),a.methodWithSignature("set",f,!0,!0,l),a.methodWithSignature("set",g,!0,!0,null),a.methodWithSignature("set",h,!0,!0,void 0),a.methodDefault("set",l);var m=function(a,b){return delete a[b],a};a.methodWithSignature("dissoc",d,!0,m),a.methodWithSignature("dissoc",e,!0,m),a.methodWithSignature("dissoc",f,!0,m),a.methodWithSignature("dissoc",g,!0,null),a.methodWithSignature("dissoc",h,!0,void 0),a.methodDefault("dissoc",m);var n=function(a,b){if(0===this.size(b))return a;var c=this.get(a,this.first(b));return 1===this.size(b)?c:this.getIn(c,this.rest(b))};a.methodWithSignature("getIn",g,j,null),a.methodWithSignature("getIn",h,j,void 0),a.methodWithSignature("getIn",["get"],j,n);var o=function(a,b,c){if(0===this.size(b))return a;var d=this.first(b);if(1===this.size(b))return this.set(a,d,c(this.get(a,d)));var e=this.get(a,d);return this.set(a,d,this.updateIn(e,this.rest(b),c))};a.methodWithSignature("updateIn",g,j,i,null),a.methodWithSignature("updateIn",h,j,i,void 0),a.methodWithSignature("updateIn",["get","set"],j,i,o);var p=function(a,b,c){if(0===this.size(b))return a;var d=this.first(b);if(1===this.size(b))return this.set(a,d,c);var e=this.get(a,d);return this.set(a,d,this.assocIn(e,this.rest(b),c))};a.methodWithSignature("assocIn",g,j,!0,null),a.methodWithSignature("assocIn",h,j,!0,void 0),a.methodWithSignature("assocIn",["get","set"],j,!0,p);var q=function(a,b){if(0===this.size(b))return a;var c=this.first(b);if(1===this.size(b))return this.dissoc(a,c);var d=this.get(a,c);return this.set(a,c,this.dissocIn(d,this.rest(b)))};a.methodWithSignature("dissocIn",g,j,null),a.methodWithSignature("dissocIn",h,j,void 0),a.methodWithSignature("dissocIn",["get","set","dissoc"],j,q),a.methodStartsWithSignature("slice",d,b("slice")),a.methodStartsWithSignature("concat",d,b("concat")),a.methodStartsWithSignature("splice",d,c("splice")),a.methodStartsWithSignature("slice",f,b("slice")),a.methodStartsWithSignature("concat",f,b("concat")),a.methodStartsWithSignature("splice",f,function(a,b,c,d){return a.slice(0,b)+(d||"")+a.slice(b+c)})}function registerBucketBindings(a){var b=require("bucketsjs");b&&a.methodWithSignature("size",a.type(b.Bag),function(a){return a.size()})}function registerLodashBindings(a){var b=require("lodash"),c=a.type([]),d=a.type({}),e=a.type(""),f=a.type(null),g=a.type(void 0);b.each(["compact","difference","rest","findIndex","findLastIndex","first","flatten","indexOf","initial","intersection","last","lastIndexOf","pull","remove","rest","sortedIndex","union","uniq","without","xor","zip","zipObject"],function(d){a.methodStartsWithSignature(d,c,b[d]),a.methodStartsWithSignature(d,f,b[d]),a.methodStartsWithSignature(d,g,b[d])}),b.each(["assign","clone","cloneDeep","defaults","findKey","findLastKey","forIn","forInRight","functions","has","invert","keys","mapValues","merge","omit","pairs","pick","transform","values"],function(c){a.methodStartsWithSignature(c,d,b[c]),a.methodStartsWithSignature(c,f,b[c]),a.methodStartsWithSignature(c,g,b[c])}),b.each(["at","contains","countBy","each","every","filter","find","findLast","forEach","forEachRight","groupBy","indexBy","invoke","map","max","min","pluck","reduce","reduceRight","reject","sample","shuffle","size","some","sortBy","toArray","where"],function(h){a.methodStartsWithSignature(h,c,b[h]),a.methodStartsWithSignature(h,e,b[h]),a.methodStartsWithSignature(h,d,b[h]),a.methodStartsWithSignature(h,f,b[h]),a.methodStartsWithSignature(h,g,b[h])}),b.each(b.functions(b),function(c){a.name||a.methodDefault(c,b[c])})}function registerImmutableBindings(a){function b(b){var c=Array.prototype.slice.call(arguments,1);return c.splice(0,0,0,0),function(){var d=Array.prototype.slice.call(arguments,1);d.splice.apply(d,c);var e=arguments[0][b];return"function"===a.type(e)?e.apply(arguments[0],d):e}}function c(b,c,d){c=parseInt(c),d=parseInt(d);var e=Array.prototype.slice.call(arguments,3),f=a.slice(b,0,c),g=a.slice(b,c+d);return a.concat(f,e,g)}function d(b,c){return a.splice(b,c,1)}function e(b,c){return a.get(b,parseInt(c))}function f(b,c,d){return a.set(b,parseInt(c),d)}var g=require("immutable"),h=a.type(g.Map()),i=function(a){return"Iterable"===a.slice(-8)},j=a.type(g.List()),k=a.type(g.OrderedMap()),l="function",m=a.type(""),n=a.type(0),o=b("delete");a.methodStartsWithSignature("splice",i,c),a.methodStartsWithSignature("splice",j,c),a.methodStartsWithSignature("dissoc",h,o),a.methodStartsWithSignature("dissoc",i,d),a.methodStartsWithSignature("dissoc",j,d),a.methodStartsWithSignature("dissoc",k,o),a.methodWithSignature("get",i,m,e),a.methodWithSignature("get",j,m,e),a.methodWithSignature("set",i,m,!0,f),a.methodWithSignature("set",j,m,!0,f);var p=b("get"),q=b("set");a.methodWithSignature("get",h,!0,p),a.methodWithSignature("get",i,n,p),a.methodWithSignature("get",j,n,p),a.methodWithSignature("get",k,!0,p),a.methodWithSignature("set",h,!0,!0,q),a.methodWithSignature("set",i,n,!0,function(b,c,d){return a.splice(b,c,1,d)}),a.methodWithSignature("set",j,n,!0,q),a.methodWithSignature("set",k,!0,!0,q),a.each(["filter"],function(c){var d=b(c),e=b(c,Boolean);a.methodWithSignature(c,h,l,d),a.methodWithSignature(c,i,l,d),a.methodWithSignature(c,j,l,d),a.methodWithSignature(c,k,l,d),a.methodWithSignature(c,h,e),a.methodWithSignature(c,i,e),a.methodWithSignature(c,j,e),a.methodWithSignature(c,k,e)}),a.each(["map","every","reduce","keys","values","size","toJSON"],function(c){var d=b(c);a.methodStartsWithSignature(c,h,d),a.methodStartsWithSignature(c,i,d),a.methodStartsWithSignature(c,j,d),a.methodStartsWithSignature(c,k,d)}),a.each(["delete","merge","mergeDeep"],function(c){var d=b(c);a.methodStartsWithSignature(c,h,d),a.methodStartsWithSignature(c,j,d),a.methodStartsWithSignature(c,k,d)}),a.each(["push","unshift"],function(c){var d=b(c);a.methodStartsWithSignature(c,j,d),a.methodStartsWithSignature(c,k,d)}),a.each(["concat","join","last","first","rest","toArray","slice","find","forEach","reverse","sort","flatten","groupBy","has","contains"],function(c){var d=b(c);a.methodStartsWithSignature(c,i,d),a.methodStartsWithSignature(c,j,d),a.methodStartsWithSignature(c,k,d)}),a.each([["each","forEach"],["isEqual","equals"]],function(c){var d=c[0],e=c[1],f=b(e);a.methodStartsWithSignature(d,h,f),a.methodStartsWithSignature(d,i,f),a.methodStartsWithSignature(d,j,f),a.methodStartsWithSignature(d,k,f)})}var buckets=require("bucketsjs"),dunderdash={},__=new namespace;registerSaneStyleBindings(__),registerLodashBindings(__),registerImmutableBindings(__),dunderdash.__=__,dunderdash.fcall=fcall,dunderdash.namespace=namespace,dunderdash.signatureChecker=signatureChecker,dunderdash.defaultDispatcher=defaultDispatcher,dunderdash.argDispatcher=argDispatcher,dunderdash.signatureDispatcher=signatureDispatcher,dunderdash["default"]=__,dunderdash.__esModule=!0,module.exports=dunderdash;